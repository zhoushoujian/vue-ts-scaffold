# qiankun

## 简介

> 一个基于微前端的解决方案，它可以让我们将一个单页面应用(SPA)中的多个前端应用(Micro Frontends)聚合在一起，形成一个完整的微服务应用。
> 它基于 single-spa，具备 js 沙箱、样式隔离、HTML Loader、预加载 等微前端系统所需的能力。qiankun 可以用于任意 js 框架，微应用接入像嵌入一个 iframe 系统一样简单。

## 什么是微前端

> 微前端是一种架构风格，它将单页面应用(SPA)中的多个前端应用(Micro Frontends)聚合在一起，形成一个完整的微服务应用。

## 为什么不是Iframe

引用链接：https://www.yuque.com/kuitos/gky7yw/gesexv
iframe最大问题在于他的隔离性无法被突破，导致应用间上下文无法被共享，随之带来的开发体验、产品体验的问题。

1. url 不同步。浏览器刷新 iframe url 状态丢失、后退前进按钮无法使用。
2. UI 不同步，DOM 结构不共享。想象一下屏幕右下角 1/4 的 iframe 里来一个带遮罩层的弹框，同时我们要求这个弹框要浏览器居中显示，还要浏览器 resize 时自动居中..
3. 全局上下文完全隔离，内存变量不共享和iframe 内外系统的通信、数据同步等需求。
4. 慢。每次子应用进入都是一次浏览器上下文重建、资源重新加载的过程。

其中有的问题比较好解决(问题1)，有的问题我们可以睁一只眼闭一只眼(问题4)，但有的问题我们则很难解决(问题3)甚至无法解决(问题2)，而这些无法解决的问题恰恰又会给产品带来非常严重的体验问题

## 微前端有哪些

1. Single-spa：Single-spa 是一个开源的微前端框架，它可以帮助您在一个页面内同时加载多个应用程序，而无需重新加载页面。
2. Qiankun：Qiankun 是阿里巴巴开发的一款开源微前端框架，它提供了一系列功能，包括跨应用通信、路由隔离、权限控制等。
3. Micro-frontend：Micro-frontend 是一个轻量级的微前端框架，它可以帮助您将大型应用程序分解为多个独立的小型应用程序。
4. Bit：Bit 是一个分布式微前端框架，它允许您在多个应用程序之间共享和重用组件。
5. Weex：Weex 是一个高性能的移动端微前端框架，它支持 iOS 和 Android 平台。

## qiankun特性

1. 基于 single-spa 封装，提供了更加开箱即用的 API。
2. 技术栈无关，任意技术栈的应用均可 使用/接入，不论是 React/Vue/Angular/JQuery 还是其他等框架。
3. HTML Entry 接入方式，让你接入微应用像使用 iframe 一样简单。
4. 样式隔离，确保微应用之间样式互相不干扰。
5. JS 沙箱，确保微应用之间 全局变量/事件 不冲突。
6. 资源预加载，在浏览器空闲时间预加载未打开的微应用资源，加速微应用打开速度。
7. umi 插件，提供了 @umijs/plugin-qiankun 供 umi 应用一键切换成微前端架构系统。
8. 子应用可独立运行
9. 既支持webpack，也支持vite

## qiankun 的核心设计理念

### 简单

由于主应用微应用都能做到技术栈无关，qiankun 对于用户而言只是一个类似 jQuery 的库，你需要调用几个 qiankun 的 API 即可完成应用的微前端改造。同时由于 qiankun 的 HTML entry 及沙箱的设计，使得微应用的接入像使用 iframe 一样简单。

### 解耦/技术栈无关

微前端的核心目标是将巨石应用拆解成若干可以自治的松耦合微应用，而 qiankun 的诸多设计均是秉持这一原则，如 HTML entry、沙箱、应用间通信等。这样才能确保微应用真正具备 独立开发、独立运行 的能力。
   